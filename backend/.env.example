# ============================================================================
# MarketLens Backend -- Environment Configuration
# Copy this file to .env and fill in your values.
# Lines starting with # are comments.
# ============================================================================

# ----------------------------------------------------------------------------
# API KEYS
# ----------------------------------------------------------------------------

# ANTHROPIC_API_KEY
# Type:     string
# Required: YES
# Default:  (none)
# Purpose:  Authentication key for the Anthropic Claude API. Used by the
#           primary agent loop (tool_use) in agents/analyst_agent.py.
#           Obtain from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-api03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# OPENAI_API_KEY
# Type:     string
# Required: NO
# Default:  (none -- fallback disabled if not set)
# Purpose:  Authentication key for the OpenAI API. Used as a fallback when
#           the Anthropic API returns 529 (overloaded) or 500 (server error).
#           If not set, errors from Anthropic are returned directly to the
#           client without retry.
#           Obtain from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ----------------------------------------------------------------------------
# MODEL CONFIGURATION
# ----------------------------------------------------------------------------

# MODEL_PRIMARY
# Type:     string
# Required: NO
# Default:  gpt-4o
# Purpose:  The primary model used for the agentic analysis loop.
#           Use gpt-4o to run GPT as primary, or a Claude model for Anthropic.
MODEL_PRIMARY=gpt-4o

# MODEL_FALLBACK
# Type:     string
# Required: NO
# Default:  claude-sonnet-4-20250514
# Purpose:  The fallback model used when the primary provider fails.
MODEL_FALLBACK=claude-sonnet-4-20250514

# ----------------------------------------------------------------------------
# AGENT BEHAVIOR
# ----------------------------------------------------------------------------

# MAX_AGENT_ITERATIONS
# Type:     integer
# Required: NO
# Default:  15
# Purpose:  Maximum number of tool_use iterations the agent will perform in a
#           single analysis run. Each iteration is one Claude API call that may
#           invoke one or more tools. Higher values allow deeper analysis but
#           increase latency and cost. Range: 5-30.
MAX_AGENT_ITERATIONS=15

# AGENT_TIMEOUT_SECONDS
# Type:     integer
# Required: NO
# Default:  120
# Purpose:  Maximum wall-clock time (in seconds) for a single analysis run.
#           If the agent exceeds this limit, the run is terminated and a
#           partial result is returned. Range: 30-300.
AGENT_TIMEOUT_SECONDS=120

# ----------------------------------------------------------------------------
# APPLICATION SETTINGS
# ----------------------------------------------------------------------------

# DEBUG
# Type:     boolean (true/false)
# Required: NO
# Default:  false
# Purpose:  Enables debug mode. When true:
#           - FastAPI returns detailed error tracebacks in responses
#           - Agent logs every tool call and result to stdout
#           - CORS allows all origins (not safe for production)
#           Set to false in production.
DEBUG=false

# ----------------------------------------------------------------------------
# FILE PATHS
# ----------------------------------------------------------------------------

# DATABASE_PATH
# Type:     string (file path)
# Required: NO
# Default:  data/marketlens.db
# Purpose:  Path to the SQLite database file used for storing analysis
#           history, cached results, and session metadata. Relative paths
#           are resolved from the marketlens-backend/ directory.
DATABASE_PATH=data/marketlens.db

# DATA_DIR
# Type:     string (directory path)
# Required: NO
# Default:  data
# Purpose:  Directory containing stock CSV files and config.json. Each
#           stock's historical data is stored as {SYMBOL}.csv in this
#           directory. Relative paths are resolved from the
#           marketlens-backend/ directory.
DATA_DIR=data

# PDF_OUTPUT_DIR
# Type:     string (directory path)
# Required: NO
# Default:  output/reports
# Purpose:  Directory where generated PDF analysis reports are saved.
#           The directory is created automatically if it does not exist.
#           Relative paths are resolved from the marketlens-backend/
#           directory.
PDF_OUTPUT_DIR=output/reports

